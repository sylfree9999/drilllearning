---
title: process-thread
date: 2018-05-30 10:31:16
tags: [concept]
---

### Process进程

进程是一个具有一定独立功能的程序，在一个数据集上的一次动态执行过程
是操作系统进行资源分配和调度的一个独立单位，是应用程序运行的载体

好比工厂车间，代表CPU所能处理的单个任务
任一时刻CPU总是运行一个进程，其他进程处于非运行状态


### Thread线程

早期任务调度采用的是时间片轮转的抢占式调用方式，而进程是任务调度的最小单位，每个进程有各自独立的一块内存，使得各个进程之间内存地址相互隔离。
后来由于对CPU的要求越来越高，进程之间的切换开销较大，于是发明了线程。
线程是程序执行中一个单一的顺序控制流程，是程序执行流的最小单元。

线程好比车间的工人，即一个车间可以允许由多个工人协同完成一个任务


### 进程与线程

进程就是包含上下文切换成程序执行时间总和 = CPU加载上下文 + CPU执行 + CPU保存上下文

但是进程的颗粒度太大，一个进程可能有好多分支和程序段，比方说进程A分为a,b,c等多个块组合而成，那么CPU的具体执行行为可能就变为：

A得到CPU -> CPU加载上下文，开始执行程序A的a小段， 然后执行程序A的b小段， 然后再执行程序A的c小段，最后CPU保存A的上下文

这里<span style="color: red">a, b, c共享了A的上下文，CPU在执行的时候没有进行上下文切换。这里的a,b,c就是线程，也就是线程共享了进程的上下文环境，被分为更为小的CPU时间段</span>


### 高并发与多线程

高并发只是一个语义相关的概念，就是让服务器能够接受多用户请求
多线程只是为了达到高并发目的（首先要有多线程接收处理多任务，才有高并发发生）。在某个细节点上，为实现某并发功能而采用的一种具体的实现方法，这种功能也可以由多进程实现。

高并发其实是一种目的，多线程只是某种手段。

